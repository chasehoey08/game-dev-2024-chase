



<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Platformer Game with Levels</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            background: linear-gradient(135deg, #0093E9 0%, #80D0C7 100%);
        }
        canvas {
            background-color: #333;
            display: block;
            border: 5px solid #111;
            box-shadow: 0px 0px 10px #000;
            border-radius: 10px;
        }
        .menu {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .menu button {
            padding: 10px 20px;
            margin: 10px;
            font-size: 16px;
            background-color: #444;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .menu button:hover {
            background-color: #666;
        }
    </style>
</head>
<body>
<div class="menu" id="menu">
    <h1 style="color: white;">Platformer Game</h1>
    <button onclick="startGame(1)">Level 1</button>
    <button onclick="startGame(2)">Level 2</button>
    <button onclick="startGame(3)">Level 3</button>
</div>
<canvas id="gameCanvas" width="800" height="600" style="display: none;"></canvas>

<script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const menu = document.getElementById('menu');
    
    // Game variables
    let gravity = 0.5;
    let score = 0;
    let level = 1;
    let player, platforms, coins, enemies, particles;

    // Initialize game objects based on level
    function initGame(level) {
        player = { x: 50, y: 500, width: 40, height: 40, color: '#FFDD44', dx: 0, dy: 0, speed: 5, jumping: false };
        particles = [];
        score = 0;

        if (level === 1) {
            platforms = [
                { x: 150, y: 400, width: 200, height: 20, color: '#FF5733' },
                { x: 450, y: 300, width: 200, height: 20, color: '#FF5733' },
            ];
            coins = [
                { x: 250, y: 350, radius: 10, color: '#FFD700' },
                { x: 500, y: 250, radius: 10, color: '#FFD700' }
            ];
            enemies = [
                { x: 600, y: 500, width: 30, height: 30, speed: 2, color: '#FF0000' },
            ];
        } else if (level === 2) {
            platforms = [
                { x: 150, y: 450, width: 200, height: 20, color: '#FF5733' },
                { x: 350, y: 350, width: 200, height: 20, color: '#FF5733' },
                { x: 600, y: 250, width: 200, height: 20, color: '#FF5733' }
            ];
            coins = [
                { x: 250, y: 400, radius: 10, color: '#FFD700' },
                { x: 400, y: 300, radius: 10, color: '#FFD700' },
                { x: 650, y: 200, radius: 10, color: '#FFD700' }
            ];
            enemies = [
                { x: 500, y: 500, width: 30, height: 30, speed: 2, color: '#FF0000' },
                { x: 200, y: 200, width: 30, height: 30, speed: 2.5, color: '#FF0000' },
            ];
        } else if (level === 3) {
            platforms = [
                { x: 150, y: 500, width: 150, height: 20, color: '#FF5733' },
                { x: 300, y: 400, width: 150, height: 20, color: '#FF5733' },
                { x: 500, y: 300, width: 150, height: 20, color: '#FF5733' },
                { x: 650, y: 200, width: 150, height: 20, color: '#FF5733' }
            ];
            coins = [
                { x: 170, y: 470, radius: 10, color: '#FFD700' },
                { x: 320, y: 370, radius: 10, color: '#FFD700' },
                { x: 520, y: 270, radius: 10, color: '#FFD700' },
                { x: 670, y: 170, radius: 10, color: '#FFD700' }
            ];
            enemies = [
                { x: 100, y: 500, width: 30, height: 30, speed: 2, color: '#FF0000' },
                { x: 300, y: 200, width: 30, height: 30, speed: 2.5, color: '#FF0000' },
                { x: 700, y: 150, width: 30, height: 30, speed: 3, color: '#FF0000' }
            ];
        }
    }

    // Start the game for the selected level
    function startGame(selectedLevel) {
        level = selectedLevel;
        initGame(level);
        menu.style.display = 'none';
        canvas.style.display = 'block';
        gameLoop();
    }

    // Handle player movement
    window.addEventListener('keydown', e => {
        if (e.key === 'ArrowLeft') player.dx = -player.speed;
        if (e.key === 'ArrowRight') player.dx = player.speed;
        if (e.key === 'ArrowUp' && !player.jumping) {  // Jump with Up Arrow
            player.dy = -10;
            player.jumping = true;
        }
        if (e.key === 'ArrowDown' && player.dy === 0) {  // Drop through platform
            player.y += 5;  // Temporarily move player down slightly to pass platform
        }
    });
    window.addEventListener('keyup', e => {
        if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') player.dx = 0;
    });

    // Collision detection
    function isColliding(rect1, rect2) {
        return rect1.x < rect2.x + rect2.width && rect1.x + rect1.width > rect2.x &&
               rect1.y < rect2.y + rect2.height && rect1.y + rect1.height > rect2.y;
    }

    function update() {
        // Player physics
        player.dy += gravity;
        player.x += player.dx;
        player.y += player.dy;

        // Screen boundaries
        if (player.x < 0) player.x = 0;
        if (player.x + player.width > canvas.width) player.x = canvas.width - player.width;
        if (player.y + player.height > canvas.height) {
            player.y = canvas.height - player.height;
            player.jumping = false;
            player.dy = 0;
        }

        // Platform collision
        platforms.forEach(platform => {
            if (isColliding(player, { ...platform, y: platform.y - 5 }) && player.dy > 0) {
                player.y = platform.y - player.height;
                player.dy = 0;
                player.jumping = false;
            }
        });

        // Coin collection
        coins = coins.filter(coin => {
            if (Math.hypot(player.x - coin.x, player.y - coin.y) < player.width / 2 + coin.radius) {
                score += 10;
                createParticles(coin.x, coin.y, 10, '#FFD700');  // Yellow particles for coins
                return false; // Remove coin
            }
            return true;
        });

        // Enemy collision and stomping
        enemies = enemies.filter(enemy => {
            if (isColliding(player, enemy)) {
                if (player.dy > 0) {  //
